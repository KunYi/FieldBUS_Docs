<svg viewBox="0 0 1400 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="700" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    Timing for PROFIBUS Compatibility
  </text>

  <!-- Define styles -->
  <defs>
    <style>
      .lane-label { font-family: Arial, sans-serif; font-size="16"; font-weight: bold; fill: #2c3e50; }
      .byte-block { fill: #3498db; stroke: #2c3e50; stroke-width: 2; }
      .control-block { fill: #e74c3c; stroke: #2c3e50; stroke-width: 2; }
      .timing-label { font-family: Arial, sans-serif; font-size="14"; fill: #34495e; text-anchor: middle; }
      .grid-line { stroke: #bdc3c7; stroke-width: 1; stroke-dasharray: 4,4; }
      .arrow-line { stroke: #34495e; stroke-width: 2; fill: none; }
      .arrow-head { fill: #34495e; }
    </style>
  </defs>

  <!-- Scenario 1: Poll/Ack cycle -->
  <g id="scenario1">
    <!-- Lane labels -->
    <text x="30" y="120" class="lane-label">(Master)</text>
    <text x="30" y="220" class="lane-label">(Slave)</text>

    <!-- Vertical reference lines -->
    <line x1="100" y1="80" x2="100" y2="240" class="grid-line"/>
    <line x1="150" y1="80" x2="150" y2="240" class="grid-line"/>
    <line x1="340" y1="80" x2="340" y2="240" class="grid-line"/>
    <line x1="390" y1="80" x2="390" y2="240" class="grid-line"/>
    <line x1="480" y1="80" x2="480" y2="240" class="grid-line"/>
    <line x1="560" y1="80" x2="560" y2="240" class="grid-line"/>
    <line x1="680" y1="80" x2="680" y2="240" class="grid-line"/>
    <line x1="730" y1="80" x2="730" y2="240" class="grid-line"/>
    <line x1="920" y1="80" x2="920" y2="240" class="grid-line"/>

    <!-- Master lane frames -->
    <!-- TID1 request bytes (7 blocks) -->
    <rect x="150" y="100" width="25" height="30" class="byte-block"/>
    <rect x="177" y="100" width="25" height="30" class="byte-block"/>
    <rect x="204" y="100" width="25" height="30" class="byte-block"/>
    <rect x="231" y="100" width="25" height="30" class="byte-block"/>
    <rect x="258" y="100" width="25" height="30" class="byte-block"/>
    <rect x="285" y="100" width="25" height="30" class="byte-block"/>
    <rect x="312" y="100" width="25" height="30" class="byte-block"/>

    <!-- Poll blocks -->
    <rect x="480" y="100" width="70" height="30" class="control-block" rx="3"/>
    <text x="515" y="121" font-family="Arial" font-size="14" text-anchor="middle" fill="white" font-weight="bold">Poll</text>

    <text x="620" y="121" font-family="Arial" font-size="18" text-anchor="middle" fill="#34495e">...</text>

    <rect x="680" y="100" width="70" height="30" class="control-block" rx="3"/>
    <text x="715" y="121" font-family="Arial" font-size="14" text-anchor="middle" fill="white" font-weight="bold">Poll</text>

    <!-- Response bytes from Slave (7 blocks) -->
    <rect x="730" y="200" width="25" height="30" class="byte-block"/>
    <rect x="757" y="200" width="25" height="30" class="byte-block"/>
    <rect x="784" y="200" width="25" height="30" class="byte-block"/>
    <rect x="811" y="200" width="25" height="30" class="byte-block"/>
    <rect x="838" y="200" width="25" height="30" class="byte-block"/>
    <rect x="865" y="200" width="25" height="30" class="byte-block"/>
    <rect x="892" y="200" width="25" height="30" class="byte-block"/>

    <!-- Slave Ack -->
    <rect x="390" y="200" width="60" height="30" class="control-block" rx="3"/>
    <text x="420" y="221" font-family="Arial" font-size="14" text-anchor="middle" fill="white" font-weight="bold">Ack</text>

    <!-- Timing arrows - TID1 -->
    <line x1="100" y1="60" x2="150" y2="60" class="arrow-line"/>
    <polygon points="103,57 103,63 98,60" class="arrow-head"/>
    <polygon points="147,57 147,63 152,60" class="arrow-head"/>
    <text x="125" y="52" class="timing-label" font-weight="bold">TID1</text>

    <!-- TGAP -->
    <line x1="340" y1="60" x2="390" y2="60" class="arrow-line"/>
    <polygon points="343,57 343,63 338,60" class="arrow-head"/>
    <polygon points="387,57 387,63 392,60" class="arrow-head"/>
    <text x="365" y="52" class="timing-label" font-weight="bold">TGAP</text>

    <!-- Tack -->
    <line x1="390" y1="60" x2="480" y2="60" class="arrow-line"/>
    <polygon points="393,57 393,63 388,60" class="arrow-head"/>
    <polygon points="477,57 477,63 482,60" class="arrow-head"/>
    <text x="435" y="52" class="timing-label" font-weight="bold">Tack</text>

    <!-- Tpoll -->
    <line x1="480" y1="60" x2="560" y2="60" class="arrow-line"/>
    <polygon points="483,57 483,63 478,60" class="arrow-head"/>
    <polygon points="557,57 557,63 562,60" class="arrow-head"/>
    <text x="520" y="52" class="timing-label" font-weight="bold">Tpoll</text>

    <!-- Trsp -->
    <line x1="680" y1="260" x2="730" y2="260" class="arrow-line"/>
    <polygon points="683,257 683,263 678,260" class="arrow-head"/>
    <polygon points="727,257 727,263 732,260" class="arrow-head"/>
    <text x="705" y="278" class="timing-label" font-weight="bold">Trsp</text>

    <!-- TGAP (second) -->
    <line x1="920" y1="260" x2="970" y2="260" class="arrow-line"/>
    <polygon points="923,257 923,263 918,260" class="arrow-head"/>
    <polygon points="967,257 967,263 972,260" class="arrow-head"/>
    <text x="945" y="278" class="timing-label" font-weight="bold">TGAP</text>
  </g>

  <!-- Scenario 2: Retry cycle -->
  <g id="scenario2" transform="translate(0, 280)">
    <!-- Lane labels -->
    <text x="30" y="120" class="lane-label">(Master)</text>
    <text x="30" y="220" class="lane-label">(Slave)</text>

    <!-- Vertical reference lines -->
    <line x1="100" y1="80" x2="100" y2="240" class="grid-line"/>
    <line x1="150" y1="80" x2="150" y2="240" class="grid-line"/>
    <line x1="340" y1="80" x2="340" y2="240" class="grid-line"/>
    <line x1="730" y1="80" x2="730" y2="240" class="grid-line"/>
    <line x1="920" y1="80" x2="920" y2="240" class="grid-line"/>

    <!-- Master first request (7 blocks) -->
    <rect x="150" y="100" width="25" height="30" class="byte-block"/>
    <rect x="177" y="100" width="25" height="30" class="byte-block"/>
    <rect x="204" y="100" width="25" height="30" class="byte-block"/>
    <rect x="231" y="100" width="25" height="30" class="byte-block"/>
    <rect x="258" y="100" width="25" height="30" class="byte-block"/>
    <rect x="285" y="100" width="25" height="30" class="byte-block"/>
    <rect x="312" y="100" width="25" height="30" class="byte-block"/>

    <!-- Master retry request (7 blocks) -->
    <rect x="730" y="100" width="25" height="30" class="byte-block"/>
    <rect x="757" y="100" width="25" height="30" class="byte-block"/>
    <rect x="784" y="100" width="25" height="30" class="byte-block"/>
    <rect x="811" y="100" width="25" height="30" class="byte-block"/>
    <rect x="838" y="100" width="25" height="30" class="byte-block"/>
    <rect x="865" y="100" width="25" height="30" class="byte-block"/>
    <rect x="892" y="100" width="25" height="30" class="byte-block"/>

    <!-- Slave Ack (delayed) -->
    <rect x="920" y="200" width="60" height="30" class="control-block" rx="3"/>
    <text x="950" y="221" font-family="Arial" font-size="14" text-anchor="middle" fill="white" font-weight="bold">Ack</text>

    <!-- Timing arrows - TID1 -->
    <line x1="100" y1="60" x2="150" y2="60" class="arrow-line"/>
    <polygon points="103,57 103,63 98,60" class="arrow-head"/>
    <polygon points="147,57 147,63 152,60" class="arrow-head"/>
    <text x="125" y="52" class="timing-label" font-weight="bold">TID1</text>

    <!-- Tretry -->
    <line x1="340" y1="60" x2="730" y2="60" class="arrow-line"/>
    <polygon points="343,57 343,63 338,60" class="arrow-head"/>
    <polygon points="727,57 727,63 732,60" class="arrow-head"/>
    <text x="535" y="52" class="timing-label" font-weight="bold">Tretry</text>
  </g>
</svg>
